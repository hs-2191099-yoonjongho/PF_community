spring:
  datasource:
    # H2 인메모리 데이터베이스 사용 (CI 환경에서 안정적인 테스트용)
    url: jdbc:h2:mem:testdb;MODE=MySQL;DATABASE_TO_LOWER=TRUE;DB_CLOSE_DELAY=-1
    username: sa
    password: 
    driver-class-name: org.h2.Driver
  jpa:
    hibernate:
      ddl-auto: create-drop
    properties:
      hibernate:
        format_sql: true
        default_batch_fetch_size: 100
        dialect: org.hibernate.dialect.H2Dialect
  flyway:
    # 테스트 환경에서는 Flyway 비활성화
    enabled: false
  h2:
    console:
      enabled: true

logging:
  level:
    org.hibernate.SQL: info
    org.hibernate.orm.jdbc.bind: warn

# 테스트에서 필요한 보안/스토리지 등 플레이스홀더 채움
jwt:
  secret: ${JWT_SECRET:local-test-secret-min-32-chars-1234567890}
  access-exp-ms: ${JWT_ACCESS_EXP_MS:3600000}
  issuer: ${JWT_ISSUER:community-app}

refresh:
  exp-ms: ${REFRESH_EXP_MS:1209600000}
  cookie:
    name: ${REFRESH_COOKIE_NAME:refresh_token}
    path: ${REFRESH_COOKIE_PATH:/api/auth}
    secure: ${REFRESH_COOKIE_SECURE:false}
    same-site: ${REFRESH_COOKIE_SAME_SITE:Lax}
    domain: ${REFRESH_COOKIE_DOMAIN:}

app:
  cors:
    allowed-origins: ${ALLOWED_ORIGINS:http://localhost:3000,http://127.0.0.1:3000}
  security:
    token-hash-algorithm: ${SECURITY_HASH_ALGORITHM:SHA-256}
    max-refresh-tokens-per-user: ${MAX_REFRESH_TOKENS:5}
  enable-origin-validation: ${ENABLE_ORIGIN_VALIDATION:false}
  public-base-url: http://localhost:8080/files
  storage:
    provider: local
    local:
      # 테스트용 임시 디렉토리 사용 (시스템 임시 디렉토리 내 하위 폴더)
      base-path: ${java.io.tmpdir}/community-test-uploads
